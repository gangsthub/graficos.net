<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Graficos.net</title>
        <link>https://graficos.net/feed.xml</link>
        <description>â–¶ Web Developer (now with more Backend!) // Former graffiti artist. &amp;&amp; Agriculture Engineer. RWD. WPO. Creative Ilustrator. Engineer. </description>
        <lastBuildDate>Mon, 07 Jan 2019 16:01:00 GMT</lastBuildDate>
        <docs>http://blogs.law.harvard.edu/tech/rss</docs>
        <generator>Graficos.net</generator>
        <image>
            <title>Graficos.net</title>
            <url>https://graficos.net/cover.png</url>
            <link>https://graficos.net/feed.xml</link>
        </image>
        <item>
            <title><![CDATA[Setting up a Nuxt Blog with Netlify, Netlify-CMS and Netlify Identity.]]></title>
            <link>https://graficos.net/blog/2018-08-21-setting-up-nuxt-with-netlify-netlify-cms-and-netlify-identity</link>
            <guid>https://graficos.net/blog/2018-08-21-setting-up-nuxt-with-netlify-netlify-cms-and-netlify-identity</guid>
            <description><![CDATA[Setting up from scratch a blog made with Nuxt.js and using JAMStack technologies: a headless cms, and the fantastic power of Netlify integrated with Github.]]></description>
            <content:encoded><![CDATA[First you need to publish the repository to Github. So If you don't have a Github account yet, [go create one](https://github.com/join).

If you are using Nuxt, [any template](https://github.com/nuxt-community/awesome-nuxt#starter-template) will do the job. Remember to hide anything you don't want to be published in the `.gitignore` first (check mine, [for example](https://github.com/gangsthub/graficos.net/blob/master/.gitignore)).

I used this one as inspiration. I would recommend to use it for the scaffolding:

<https://github.com/renestalder/nuxt-netlify-cms-starter-template>

Ok, now that our site is published (check [mine](https://github.com/gangsthub/graficos.net) for instance), let's link it to Netlify, so we get to do the deploy job from there:

![Image showing the Netlify interface. We want to show specially the position of the "New Site from Git"](/images/uploads/2018-09-01-16_20_20-sites-_-paul-melero.png)

See the **`"`New Site from Git`"` button**? From there, Netlify will make us browse our repositories from Github and we have to choose our Blog repository.

The default commands for getting a Nuxt site up and ready are:

* **`npm run generate`** (for generating a static site, which is the one we want).
* (Or `npm run build && npm start` for the _SPA_ mode. But not in this case.)

It will also ask us to specify the folder from where we are serving. It's **`dist`** for our Nuxt sites.

Ok, now let's add the CMS capabilities: Enters [Netlify CMS](https://www.netlifycms.org/).

![Image showing the jumbo header that appears when you enter to the netlify CMS site.](/images/uploads/2018-12-11-17_16_29-window.png)

With their own Headless CMS implementation we will be able to add "posts" to our blog and store them on our Github account. Specifically the route will be specified in our netlifyCMS [config file](https://www.netlifycms.org/docs/configuration-options/). It would look something like this:

```yaml{3,10,13}
backend:
  name: github
  accept_roles: #optional - accepts all users if left out
    - root
  repo: 'gangsthub/graficos.net'
media_folder: 'static/images/uploads' # Media files will be stored in the repo under static/images/uploads
public_folder: '/images/uploads' # The src attribute for uploaded media will begin with /images/uploads
collections:
  - name: 'blog' # Used in routes, e.g., /admin/collections/blog
    label: 'Post' # Used in the UI
    folder: 'content/blog/posts' # The path to the folder where the documents are stored
    create: true # Allow users to create new documents in this collection
    slug: '{{year}}-{{month}}-{{day}}-{{slug}}' # Filename template, e.g., YYYY-MM-DD-title.md
    format: 'json'
    fields: # The fields for each document, usually in front matter
      - {label: "Lang", name: "lang", widget: "string"}
      - {label: "Title", name: "title", widget: "string", tagname: "h1"}
      - {label: "Publish Date", name: "date", widget: "datetime"}
      - {label: "Featured Image", name: "thumbnail", widget: "image", required: true}
      - {label: "Body", name: "body", widget: "markdown"}
      - {label: "SEO Description", name: "description", widget: "text", required: true, pattern: ["^.{50,300}$", "Must be within 50 and 300 chars"]}
```

As you can see in the `collections.folder` property we specify the path. We can define as many `collections` as needed for different posts or pages.

The `accept_roles` option is also important because it's related to the admin side of the CMS which we are going to enable in a bit.

Within the Netlify platform, we need to enable **Identity**, one of its crown jewel features. You will see it in the dashboard menu:

![Image showing the link position in the app.netlify.com dashboard menu](/images/uploads/2018-12-11-17_27_46-window.png)

On the Site settings it is also mandatory:

* to enable the Git Gateway (On the identity instance, if I am not wrong), so both platforms can communicate:
  * `https://app.netlify.com/sites/<YOUR SITE>/settings/identity#git-gateway`
* and to set up my users. In this case, I only have one user with the `root` role.
  * `https://app.netlify.com/sites/<YOUR SITE>/settings/general`
* also, enable OAuth in user settings:
  * `https://app.netlify.com/sites/<YOUR SITE>/settings/access#oauth`

Remember that Netlify CMS is going to look for the `config.yml` we were talking about. So if you are using Nuxt.js, place it somewhere like under static (that folder contents gets copied to the root of your page when you generate the static version).

You need also to add your Identity entry point. In my case (full disclosure) is`/static/admin.html`. And place there the `netlify-cms.js` external link as described in the [documentation](https://www.netlifycms.org/docs/add-to-your-site/).

Ok, push your changes to see under deploys a preview deploy of that entry point.

Nice!

Last but not least, checkout how to [generate your blog routes dynamically](https://github.com/gangsthub/graficos.net/blob/f071cc0c82888932cf3bdaed202e16675d6c0ad3/nuxt.config.js#L123-L132):

```js{8}
// nuxt.config.js

const dynamicRoutes  = getDynamicPaths({ '/blog': 'blog/posts/*.json' });

module.exports = {
  ...
  generate: {
    routes: dynamicRoutes,
  },
  ...
}

function getDynamicPaths(urlFilepathTable) {
  return [].concat(
    ...Object.keys(urlFilepathTable).map(url => {
      var filepathGlob = urlFilepathTable[url];
      return glob
        .sync(filepathGlob, { cwd: 'content' })
        .map(filepath => `${url}/${path.basename(filepath, '.json')}`);
    })
  );
}
```

And also, check how to create dynamic routes on [Nuxt](https://nuxtjs.org/guide/routing/#dynamic-routes).

I'm leaving my blog OS, so you can always check how I did it on my repository.

Thanks for reading! ðŸ˜‹ðŸ˜Š]]></content:encoded>
        </item>
    </channel>
</rss>